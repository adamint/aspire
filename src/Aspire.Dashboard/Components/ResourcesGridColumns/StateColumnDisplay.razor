@using Aspire.Dashboard.Model
@using Aspire.Dashboard.Otlp.Model
@using Aspire.Dashboard.Resources
@inject IStringLocalizer<Columns> Loc

@{
    var unviewedErrorCount = GetUnviewedErrorCount(Resource);
}

@if (unviewedErrorCount > 0)
{
    <FluentCounterBadge Count="@unviewedErrorCount" Appearance="Appearance.Lightweight" BackgroundColor="@Color.Error" Color="Color.Fill" Max="9">
        <StateColumnText Resource="@Resource"/>
    </FluentCounterBadge>
}
else
{
    <StateColumnText Resource="@Resource"/>
}

@code {
    [Parameter, EditorRequired]
    public required Dictionary<OtlpApplication, int>? UnviewedErrorCounts { get; set; }

    [Parameter, EditorRequired]
    public required ResourceViewModel Resource { get; set; }
}
